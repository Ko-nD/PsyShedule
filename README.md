# PsySheduler

–≠—Ç–æ **–ª–∏—á–Ω—ã–π –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç**, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è** –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –≤—Ä–∞—á–∞ (–ø—Å–∏—Ö–æ–ª–æ–≥–∞) –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ [SberHealth](https://telemed-patient-bff.sberhealth.ru) –∏ **—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞ –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤.  
–ü—Ä–æ–µ–∫—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è —Ç–µ–º, –∫—Ç–æ —Ö–æ—á–µ—Ç **–∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è** —É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞, –Ω–µ –æ–±–Ω–æ–≤–ª—è—è —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ä—É—á–Ω—É—é –∫–∞–∂–¥—ã–µ –ø—è—Ç—å –º–∏–Ω—É—Ç.  

> **–í–Ω–∏–º–∞–Ω–∏–µ**: –í—ã –º–æ–∂–µ—Ç–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–¥ –∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤—Ä–∞—á–µ–π ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å `DOCTOR_ID` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å API-URL.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å** –∫ API SberHealth (—Ä–∞–∑ –≤ 30 —Å–µ–∫—É–Ω–¥ + —Å–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ 15 —Å–µ–∫—É–Ω–¥).
2. **–¢–µ–ª–µ–≥—Ä–∞–º-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
   - –ï—Å–ª–∏ —Å–ª–æ—Ç–æ–≤ –Ω–µ—Ç, –±–æ—Ç –ø–∏—à–µ—Ç, —á—Ç–æ ¬´üî¥ –°–ª–æ—Ç–æ–≤ –Ω–µ—Ç üî¥¬ª.
   - –ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è **–Ω–æ–≤—ã–µ —Å–ª–æ—Ç—ã**, –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è ¬´üü¢ –ü–æ—è–≤–∏–ª–∏—Å—å —Å–ª–æ—Ç—ã üü¢¬ª (—Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –≤—Ä–∞—á–∞).
   - –°–ª–æ—Ç(—ã), –∫–æ—Ç–æ—Ä—ã–µ –∏—Å—á–µ–∑–ª–∏ (–±—ã–ª–∏ –∑–∞–Ω—è—Ç—ã), –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏—è.
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤ `data/state.json`:
   - –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ **–Ω–µ** –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–µ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
   - –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É **—Å –∏–º–µ—é—â–∏–º—Å—è** —Å–æ–æ–±—â–µ–Ω–∏–µ–º (—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ ¬´–Ω–µ—Ç —Å–ª–æ—Ç–æ–≤¬ª).
4. **–ó–∞—â–∏—Ç–∞ –æ—Ç –∞–Ω—Ç–∏–±–æ—Ç-—Å–∏—Å—Ç–µ–º** (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è):
   - –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (—Ä–∞–∑–Ω—ã–µ `User-Agent`).
   - –ù–µ–±–æ–ª—å—à–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (—Ä–∞–Ω–¥–æ–º 1..15 —Å–µ–∫).
5. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (`.env`):
   - `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID`, `DOCTOR_ID` ‚Äî –≤—Å–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
   - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `python-dotenv` –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –∏—Ö –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø—É—Å–∫–∞.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
   ```bash
   git clone https://github.com/YourUsername/PsySheduler.git
   cd PsySheduler
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   pip install -r requirements.txt
   ```
   (–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.)

3. **–°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–π—Ç–µ `.env`**:
   - –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞) —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏:
     ```dotenv
     TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN
     TELEGRAM_CHAT_ID=YOUR_CHAT_ID
     DOCTOR_ID=YOUR_DOCTOR_ID
     ```
   - `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞.  
   - `TELEGRAM_CHAT_ID` ‚Äî ID –≤–∞—à–µ–≥–æ –¢–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç–∞ –∏–ª–∏ –∫–∞–Ω–∞–ª–∞ (–≤ —Å–ª—É—á–∞–µ –∫–∞–Ω–∞–ª–∞ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `-100xxxxxx`).  
   - `DOCTOR_ID` ‚Äî ID –≤—Ä–∞—á–∞ –Ω–∞ SberHealth (–Ω–∞–ø—Ä–∏–º–µ—Ä, `3194605`).

4. **–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `data/`**, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç:
   ```bash
   mkdir data
   ```
   –≠—Ç–∞ –ø–∞–ø–∫–∞ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª `state.json` —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–æ—Ç–∞ (—Å–æ–æ–±—â–µ–Ω–∏—è, –¥–∞—Ç—ã –∏ —Ç.–¥.). –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `.gitignore`.

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç**:
   ```bash
   python monitor.py
   ```
   –ë–æ—Ç –Ω–∞—á–Ω—ë—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ ~30..45 —Å–µ–∫—É–Ω–¥ –∏ —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –¢–µ–ª–µ–≥—Ä–∞–º.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
PsySheduler/
‚îú‚îÄ‚îÄ data/                        # –ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è state.json (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è Git)
‚îú‚îÄ‚îÄ monitor.py                   # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –±–æ—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requests, python-dotenv –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ .env.example                 # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ .env
‚îú‚îÄ‚îÄ .gitignore                   # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç .env, data/ –∏ —Ç.–ø.
‚îî‚îÄ‚îÄ Dockerfile (–µ—Å–ª–∏ –µ—Å—Ç—å)       # –î–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

- **`monitor.py`**: –°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –±–æ—Ç–∞:
  - `fetch_slots()` ‚Äî –∑–∞–ø—Ä–æ—Å –∫ API.
  - `run_monitor()` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª.
  - `tg_send_message` / `tg_edit_message` / `tg_delete_message` ‚Äî –¢–µ–ª–µ–≥—Ä–∞–º-–º–µ—Ç–æ–¥—ã.
  - –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`state.json`), —á—Ç–æ–±—ã –±–æ—Ç –∑–Ω–∞–ª, –∫–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –µ—Å—Ç—å –≤ –∫–∞–Ω–∞–ª–µ.

---

## –†–∞–±–æ—Ç–∞ —Å Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:

1. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
2. **–°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑**:
   ```bash
   docker build -t psysheduler .
   ```
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ**:
   ```bash
   docker run -d \
     --name psysheduler_container \
     --env-file .env \
     -v "$(pwd)/data:/app/data" \
     psysheduler
   ```
   - `--env-file .env` –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –±–æ—Ç—É.
   - `-v "$(pwd)/data:/app/data"` –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É `data/` –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏.

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–†–∞–∑ –≤ 30..45 —Å–µ–∫—É–Ω–¥**:
   - –ë–æ—Ç –¥–µ–ª–∞–µ—Ç `GET` –∫ URL `API_URL` SberHealth.
   - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Å–ª–æ—Ç—ã —Å —Ç–µ–∫—É—â–∏–º–∏.
   - –ï—Å–ª–∏ **—Å–ª–æ—Ç–æ–≤ –Ω–µ—Ç**, –≤—ã–≤–æ–¥–∏—Ç ¬´üî¥ –°–ª–æ—Ç–æ–≤ –Ω–µ—Ç üî¥¬ª ‚Äî –∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ **–Ω–µ** –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.
   - –ï—Å–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è **–Ω–æ–≤—ã–µ** —Å–ª–æ—Ç—ã, –º–µ–Ω—è–µ—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç) —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏.  
   - –ï—Å–ª–∏ —á–∞—Å—Ç—å —Å–ª–æ—Ç–æ–≤ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç, –±–æ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, —É–±–∏—Ä–∞—è –ø—Ä–æ–ø–∞–≤—à–∏–µ —á–∞—Å—ã.
2. –ü—Ä–∏ **–≤—ã–∫–ª—é—á–µ–Ω–∏–∏** –±–æ—Ç–∞ –∑–∞–ø–∏—Å—å –æ —Å–æ–æ–±—â–µ–Ω–∏–∏ (–µ–≥–æ `message_id`) –æ—Å—Ç–∞—ë—Ç—Å—è –≤ `state.json`.  
3. –ü—Ä–∏ **—Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ** –±–æ—Ç **—Å—á–∏—Ç—ã–≤–∞–µ—Ç** —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ **–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç** —Å —Ç–µ–º –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

---

## –ü–æ—á–µ–º—É ¬´PsySheduler¬ª?

- –ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–ª—å ‚Äî **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è** —É –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –≤ SberHealth, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–ª–æ—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ö–∞–æ—Ç–∏—á–Ω–æ.  
- –ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç, –º–æ–∂–Ω–æ **–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –≤—Ä–∞—á –æ—Å–≤–æ–±–æ–¥–∏–ª –æ–∫–æ—à–∫–æ.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –î–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –¥–ª—è **–ª–∏—á–Ω—ã—Ö** –Ω—É–∂–¥. –í—ã –º–æ–∂–µ—Ç–µ **—Å–≤–æ–±–æ–¥–Ω–æ** –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ–¥ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏ (–¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö –≤—Ä–∞—á–µ–π, –º–µ–Ω—è—Ç—å API –∏ —Ç.–¥.).  
- –õ—é–±—ã–µ **Pull Requests**, **Issues** –∏ **–∏–¥–µ–∏** –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è.

**–£–¥–∞—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!** –ï—Å–ª–∏ –∫–æ–¥ –ø–æ–º–æ–≥ –≤–∞–º ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ ‚≠ê –∑–≤–µ–∑–¥—É –Ω–∞ GitHub –∏–ª–∏ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏!